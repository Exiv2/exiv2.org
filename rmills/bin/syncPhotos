#!/usr/bin/env bash
# set -v

if [ ${BASH_VERSINFO[0]} -lt 4 ]; then
	echo "$0 requires bash 4 (or higher)"
	exit 2
fi

year=$(date +"%Y")
directory=~/Pictures/Photos/$year

if [ ! -d "$directory" ]; then
	echo "$directory is not a directory"
	exit 1
fi

declare -A drives=( \
   # ["Photos"]="/Volumes/Photos/" \
   # ["BackupXX"]="/Volumes/Backup/Photos/" \
   # ["Backup"]="rmills@exiv2.dyndns.org:/Volumes/Backup/Photos/"
   ["Backup"]="rmills@rmillsmm.local:/Volumes/Backup/Photos/"
   ["Photos"]="rmills@rmillsmm.local:~/Pictures/Photos/"
)

reportDrives() {
	for drive in "${!drives[@]}"; do
		to=${drives["$drive"]}
		if [ ! -d "$to" ]; then
			echo "Drive: '$drive' not available because $to is not a directory"
		fi
	done
}

##
# write the drives we can find
for drive in "${!drives[@]}"; do
	to=${drives["$drive"]}
	echo "drive " $drive is $to
	#if [ -d "$to" ]; then
		echo '---' rsync -varz "$directory" "$to" '---'
			       rsync -varz "$directory" "$to"
		echo
	#else
	#	echo '***'"$to does not exist"'***'
	#fi
done

# reportDrives

# That's all Folks!
##
